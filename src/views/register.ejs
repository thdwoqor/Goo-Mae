<!DOCTYPE html>
<html lang="ko">

<head>
    <%- include('./partial/head') %>
        <!-- Custom styles for this template -->
        <!-- <link href="/public/css/login.css" rel="stylesheet"> -->
        <style>
            .container {
                max-width: 340px;
            }
        </style>
        <script>
            (function () {
                // Example starter JavaScript for disabling form submissions if there are invalid fields
                'use strict'

                window.addEventListener('DOMContentLoaded', () => {
                    let submit_state = false;
                    // Fetch all the forms we want to apply custom Bootstrap validation styles to
                    const form = document.querySelector('form');

                    document.querySelector('#pw_confirm').addEventListener("keyup", (e) => {
                        if (!submit_state) return;
                        const pw = document.querySelector('#pw').value;
                        const pw_confirm = document.querySelector('#pw_confirm').value;

                        if (pw != pw_confirm || pw_confirm == '') {
                            document.getElementById('pw_confirm').classList.remove('is-valid');
                            document.getElementById('pw_confirm').classList.add('is-invalid');
                        } else {
                            document.getElementById('pw_confirm').classList.remove('is-invalid');
                            document.getElementById('pw_confirm').classList.add('is-valid');
                        }
                    });

                    document.querySelector('#pw').addEventListener("keyup", (e) => {
                        if (!submit_state) return;
                        const pw = document.querySelector('#pw').value;
                        const pw_confirm = document.querySelector('#pw_confirm').value;

                        if (pw != pw_confirm || pw_confirm == '') {
                            document.getElementById('pw_confirm').classList.remove('is-valid');
                            document.getElementById('pw_confirm').classList.add('is-invalid');
                        } else {
                            document.getElementById('pw_confirm').classList.remove('is-invalid');
                            document.getElementById('pw_confirm').classList.add('is-valid');
                        }
                    });

                    // Loop over them and prevent submission
                    form.addEventListener('submit', function (event) {
                        const pw = document.querySelector('#pw').value;
                        const pw_confirm = document.querySelector('#pw_confirm').value;
                        // pw_confirm.required=false;

                        if (pw != pw_confirm || pw_confirm == '') {
                            document.getElementById('pw_confirm').classList.remove('is-valid');
                            document.getElementById('pw_confirm').classList.add('is-invalid');
                        } else {
                            document.getElementById('pw_confirm').classList.remove('is-invalid');
                            document.getElementById('pw_confirm').classList.add('is-valid');
                        }

                        if (!form.checkValidity() || pw != pw_confirm) {
                            event.preventDefault()
                            event.stopPropagation()
                        }

                        document.getElementById('id_div').classList.add('was-validated');
                        document.getElementById('pw_div').classList.add('was-validated');
                        document.getElementById('name_div').classList.add('was-validated');
                        // form.classList.add('was-validated')
                        submit_state = true;
                    }, false);
                });
            })();
        </script>
</head>

<div class="container">
    <main>
        <div class="text-center">
            <img class="mini-logo" src="https://whatssub.co/images/brand/img_symbol_default_filled.png" alt=""
                draggable="false" style="width:100px; height:100px; margin-bottom: 10px;">
            <h3 style="font-weight: lighter; margin-bottom: 20px;">Register in to Whats sub</h3>
        </div>

        <form class="needs-validation" method="POST" action="/register" novalidate>
            <div
                style="background-color: #FFFFFF; border-radius: 12px; border: 1px solid #CED4DA; margin-bottom: 20px;">
                <div class="m-3">
                    <div id='id_div' class="col-12 mt-2">
                        <label for="id" class="form-label">아이디</label>
                        <input type="text" class="form-control" name="id" id="id" placeholder="아이디" required>
                        <div class="invalid-feedback">
                            아이디를 입력하세요
                        </div>
                    </div>

                    <div id='pw_div' class="col-12 mt-2">
                        <label for="pw" class="form-label">비밀번호</label>
                        <input type="password" class="form-control" name="pw" id="pw" placeholder="비밀번호" required>
                        <div class="invalid-feedback">
                            비밀번호를 입력하세요
                        </div>
                    </div>

                    <div class="col-12 mt-2">
                        <label for="pw_confirm" class="form-label">비밀번호 확인</label>
                        <input type="password" class="form-control" id="pw_confirm" placeholder="비밀번호 확인" required>
                        <div class="invalid-feedback">
                            비밀번호가 일치하지 않습니다
                        </div>
                    </div>

                    <div id='name_div' class="col-12 mt-2">
                        <label for="id" class="form-label">이름</label>
                        <input type="text" class="form-control" name="name" id="name" placeholder="이름" required>
                        <div class="invalid-feedback">
                            이름를 입력하세요
                        </div>
                    </div>

                    <div class="col-12 mt-4 mb-4">
                        <button class="w-100 btn btn-primary btn-lg" type="submit">회원가입</button>
                    </div>

                </div>

            </div>
            <div style="text-align:center; background-color: #FFFFFF; border-radius: 12px; border: 1px solid #CED4DA; margin-bottom: 20px;">
                <div style="margin-top: 10px; margin-bottom: 10px;">
                    <h6 style="display:inline; font-weight: lighter; ">Goo Mae 계정이 있으신가요?</h6>
                    <a href="/login">로그인</a>
                </div>
            </div>
        </form>
    </main>
</div>

</html>